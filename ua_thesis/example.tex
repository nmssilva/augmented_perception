% arara: pdflatex: { synctex: true, shell: true}   
% arara: bibtex
% arara: pdflatex: { synctex: true, shell: true}

%
% uaThesis example (for a thesis written in Portuguese)
%
% the complete list of options and commands can be found in uaThesis.sty
%
%

\documentclass[11pt,twoside,a4paper]{report}
\usepackage[DETI,newLogo]{uaThesis}

\def\ThesisYear{2018}

% optional packages
\usepackage[UKenglish]{babel}
\usepackage{multicol}
\usepackage{acronym}
\usepackage[acronym, toc, automake]{glossaries}
\usepackage[toc,page]{appendix}
\usepackage{hyperref}
\usepackage{epsfig}     
\usepackage{subfig} 
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{listings}
\usepackage{color}
\usepackage{fancyvrb}
\usepackage{ifthen}
\usepackage{texments}
\usepackage{fancyhdr}
\usepackage{xspace}% used by \sigla

\usepackage[
backend=biber,
style=authoryear,
citestyle=authoryear
]{biblatex}

\addbibresource{library.bib} %Imports bibliography file


\definecolor{mygreen}{rgb}{0,0.6,0}
\definecolor{mygray}{rgb}{0.5,0.5,0.5}
\definecolor{mymauve}{rgb}{0.58,0,0.82}


\lstset{ %
	backgroundcolor=\color{white},   % choose the background color; you must add \usepackage{color} or \usepackage{xcolor}; should come as last argument
	basicstyle=\fontfamily{sbc}\selectfont,        % the size of the fonts that are used for the code
	breakatwhitespace=false,         % sets if automatic breaks should only happen at whitespace
	breaklines=true,                 % sets automatic line breaking
	captionpos=b,                    % sets the caption-position to bottom
	commentstyle=\color{mygreen},    % comment style
	deletekeywords={...},            % if you want to delete keywords from the given language
	escapeinside={\%*}{*)},          % if you want to add LaTeX within your code
	extendedchars=true,              % lets you use non-ASCII characters; for 8-bits encodings only, does not work with UTF-8
	%frame=single,	                   % adds a frame around the code
	keepspaces=true,                 % keeps spaces in text, useful for keeping indentation of code (possibly needs columns=flexible)
	keywordstyle=\color{blue},       % keyword style
	%  language=XML,                 % the language of the code
	morekeywords={*,...},            % if you want to add more keywords to the set
	numbers=left,                    % where to put the line-numbers; possible values are (none, left, right)
	numbersep=5pt,                   % how far the line-numbers are from the code
	numberstyle=\tiny\color{mygray}, % the style that is used for the line-numbers
	rulecolor=\color{black},         % if not set, the frame-color may be changed on line-breaks within not-black text (e.g. comments (green here))
	showspaces=false,                % show spaces everywhere adding particular underscores; it overrides 'showstringspaces'
	showstringspaces=false,          % underline spaces within strings only
	showtabs=false,                  % show tabs within strings adding particular underscores
	stepnumber=1,                    % the step between two line-numbers. If it's 1, each line will be numbered
	stringstyle=\color{mymauve},     % string literal style
	tabsize=2,	                   % sets default tabsize to 2 spaces
}

\lstdefinestyle{xml}{
	belowcaptionskip=1\baselineskip,
	breaklines=true,
	%  frame=L,
	%  xleftmargin=\parindent,
	language=XML,
	showstringspaces=false,
	basicstyle=\footnotesize\ttfamily,
	keywordstyle=\bfseries\color{green!40!black},
	commentstyle=\itshape\color{purple!40!black},
	identifierstyle=\color{blue},
	stringstyle=\color{orange},
}

\definecolor{maroon}{rgb}{0.5,0,0}
\definecolor{darkgreen}{rgb}{0,0.5,0}
\lstdefinelanguage{XML}
{
	basicstyle=\ttfamily,
	morestring=[s]{"}{"},
	morecomment=[s]{?}{?},
	morecomment=[s]{!--}{--},
	commentstyle=\color{darkgreen},
	moredelim=[s][\color{black}]{>}{<},
	moredelim=[s][\color{red}]{\ }{=},
	stringstyle=\color{blue},
	identifierstyle=\color{maroon}
}

\makeglossaries
\glstoctrue

\newacronym{ad}{AD}{Autonomous Driving}
\newacronym{adas}{ADAS}{Advanced Driver Assistance Systems}
\newacronym{ros}{ROS}{Robot Operating System}
\newacronym{gui}{GUI}{Graphical User Interface}
\newacronym{pcl}{PCL}{Point Cloud Library}
\newacronym{opencv}{OpenCV}{Open Source Computer Vision Library}
\newacronym{lidar}{LIDAR}{Light Detection And Ranging}
\newacronym{lar}{LAR}{Laboratory of Automation and Robotics}
\newacronym{mtt}{MTT}{Multi Target Tracking}
\newacronym{hsv}{HSV}{Hue, Saturation and Value}
\newacronym{rca}{RCA}{Radio Corporation of America}
\newacronym{atc}{ATC}{Advanced Technologies Center}
\newacronym{darpa}{DARPA}{Defense Advanced Research Projects Agency}
\newacronym{scot}{SCOT}{Shared Computer-Operated Transit}
\newacronym{smart}{SMART}{Singapore-MIT Alliance for Research and Technology}
\newacronym{kitti}{KITTI}{Karlsruhe Institute of Technology
	and Toyota Technological Institute}
\newacronym{mpii}{MPII}{Max Planck Institut Informatik}
\newacronym{ethz}{ETHZ}{Eidgenössische Technische Hochschule Zürich}
\newacronym{epfl}{EPFL}{\'Ecole polytechnique f\'ed\'erale de Lausanne}
\newacronym{roi}{ROI}{Region of Interest}
\newacronym{lartk}{LARTk}{\gls{lar} Toolkit}

% optional (comment to use default)s
%   depth of the table of contents
%     1 ... chapther and sections
%     2 ... chapters, sections, and subsections
%     3 ... chapters, sections, subsections, and subsubsections
\setcounter{tocdepth}{3}

% optional (comment to used default)
%   horizontal line to separate floats (figures and tables) from text
\def\topfigrule{\kern 7.8pt \hrule width\textwidth\kern -8.2pt\relax}
\def\dblfigrule{\kern 7.8pt \hrule width\textwidth\kern -8.2pt\relax}
\def\botfigrule{\kern -7.8pt \hrule width\textwidth\kern 8.2pt\relax}

% custom macros (could also be defined using \newcommand)
\def\I{\mathtt{i}}         % one possible way to represent $\sqrt{-1}$
\def\Exp#1{e^{2\pi\I #1}}  % argument inside braces, i.e., "{}"
\def\EXP#1.{e^{2\pi\I #1}} % argument finishes when a full stop is encountered, i.e., "."
\def\sigla{\LaTeX\xspace}  % use as "blabla \sigla blabla (no need to do "blabla \sigla\ blabla"

\def\AddVMargin#1{\setbox0=\hbox{#1}%
                  \dimen0=\ht0\advance\dimen0 by 2pt\ht0=\dimen0%
                  \dimen0=\dp0\advance\dimen0 by 2pt\dp0=\dimen0%
                  \box0}   % add extra vertical space above and below the argument (#1)
\def\Header#1#2{\setbox1=\hbox{#1}\setbox2=\hbox{#2}%
           \ifdim\wd1>\wd2\dimen0=\wd1\else\dimen0=\wd2\fi%
           \AddVMargin{\parbox{\dimen0}{\centering #1\\#2}}} % put #1 on top #2



\begin{document}

%
% Cover page (use only one of the first two \TitlePage)
%

% First alternative, with a figure
\TitlePage
  %\GRID  % for debugging ONLY
  \HEADER{\BAR} % the \FIG{} is optional
         {\ThesisYear}
  \TITLE{Nuno Miguel \newline Soares Silva}
        {Anota\c c\~ ao e Seguimento Semi-Autom\'atico de Alvos para Condu\c c\~ ao Aut\'onoma \newline Semi-Automatic Labelling and Tracking of Targets for Autonomous Driving}
\EndTitlePage
\titlepage\ \endtitlepage % empty page

%
% Initial thesis pages
%

\TitlePage
  \HEADER{}{\ThesisYear}
  \TITLE{Nuno Miguel \newline Soares Silva}
        {Anota\c c\~ ao e Seguimento Semi-Autom\'atico de Alvos para Condu\c c\~ ao Aut\'onoma \newline Semi-Automatic Labelling and Tracking of Targets for Autonomous Driving}
  \vspace*{15mm}
  \TEXT{}
       {Disserta\c c\~ao apresentada \`a Universidade de Aveiro para cumprimento dos requesitos
        necess\'arios \`a obten\c c\~ao do grau de Mestre em Engenharia de Computadores e Telem\'atica , realizada sob a orienta\c c\~ao
        cient\'\i fica de Paulo Miguel de Jesus Dias, Professor Auxiliar do Departamento de Electr\'onica, Telecomunica\c c\~oes e Inform\'atica da Universidade de Aveiro, de Vitor Manuel Ferreira dos Santos, Professor Associado do Departamento de Engenharia Mec\^ anica e de Miguel Armando Riem de Oliveira, Professor Auxiliar do Departamento de Engenharia Mec\^ anica.}
\EndTitlePage
\titlepage\ \endtitlepage % empty page

\TitlePage
  \vspace*{55mm}
  \TEXT{\textbf{o j\'uri~/~the jury\newline}}
       {}
  \TEXT{presidente~/~president}
       {\textbf{Prof. Doutor Ant\'onio Jos\'e Ribeiro Neves}\newline {\small
        Professor Auxiliar, Universidade de Aveiro}}
  \vspace*{5mm}
  \TEXT{vogais~/~examiners committee}
       {\textbf{Doutor Jo\~ao Manuel Leite da Silva}\newline {\small
        Investigador S\'enior, Altran Portugal (arguente)}}
  \vspace*{5mm}
  \TEXT{}
       {\textbf{Prof. Doutor Paulo Miguel de Jesus Dias}\newline {\small
        Professor Auxiliar, Universidade de Aveiro (orientador)}}
\EndTitlePage
\titlepage\ \endtitlepage % empty page

\TitlePage
  \vspace*{55mm}
  \TEXT{\textbf{agradecimentos~/\newline acknowledgements}}
       {\`A minha fam\'ilia em especial \`a minha m\~ae e ao meu pai pela educa\c c\~ao que me deram e por estarem comigo em todos os momentos. Aos professores Paulo Dias e V\'itor Santos pela sua orienta\c c\~ ao, sugest\~oes e dedica\c c\~ ao ao projeto. Tamb\'em ao professor Miguel Riem Oliveira pela sua prontid\~ao a ajudar e disponibilidade.}
  \TEXT{}
       {Por \'ultimo, mas n\~ao menos importante, aos meus amigos e pessoal do DETI que durantes estes anos me fizeram evoluir como pessoa e que contribu\'iram para a minha forma\c c\~ ao acad\' emica.}
\EndTitlePage
\titlepage\ \endtitlepage % empty page

\TitlePage
  \vspace*{55mm}
  \TEXT{\textbf{Palavras-chave}}
  {Navega{\c c}\~ao aut\'onoma; Ve\'iculos aut\'onomos; ATLASCAR; Agrupamento de dados; Calibra{\c c}\~ao; Anota\c c\~ao de dados; Dete\c c\~ao de Objetos; Fus\~ao de Dados; ADAS; LIDAR; Processamento de Imagem.}
  \vspace*{5mm}
  \TEXT{\textbf{Resumo}}
       {No \^ambito do projeto do ATLASCAR2, esta disserta\c c\~ao baseia-se no desenvolvimento (usando \gls{ros}) de um sistema de assist\^encia \`a condu\c c\~ao que implementa uma interface de dete\c c\~ao, seguimento e anota\c c\~ao de alvos na estrada. A dete\c c\~ao e o seguimento s\~ao feitos a partir de dados de sensores \gls{lidar} e de uma c\^amera. Numa primeira fase \'e implementado um algoritmo para ser usado na c\^amera baseado na apar\^encia do alvo a ser seguido. Seguidamente, \'e desenvolvido um algoritmo baseado no alcance usando dados adquiridos nos sensores para seguir objetos num espa\c co tridimensional. Finalmente, como \'e poss\'ivel detetar e seguir objetos usando a imagem e os lasers, a combina\c c\~ao dos algoritmos \'e feita  projetando o que \'e capturado pelos sensores na imagem da c\^amera, sendo poss\'ivel obter um seguimento mais preciso e robusto dos alvos na estrada. Para avaliar o algoritmo alguns datasets foram usados com a anota\c c\~ao dos v\'arios alvos detetados e seguidos. Para efetuar este trabalho \'e necess\'ario que os sensores e a c\^amera estejam devidamente calibrados. Para este efeito, a calibra\c c\~ao entre os v\'arios dispositivos \'e feita atrav\'es de uma aplica\c c\~ao que, ao passar uma bola em frente dos sensores, \'e poss\'ivel descobrir os valores das posi\c c\~oes de cada sensor relativamente a um dispositivo dado como refer\^encia. Ao n\'ivel da calibra\c c\~ao, esta disserta\c c\~ao inclui tamb\'em uma melhoria do algoritmo de dete\c c\~ao da bola na imagem obtida pela c\^amera.}
\EndTitlePage
\titlepage\ \endtitlepage % empty page

\TitlePage
  \vspace*{55mm}
  \TEXT{\textbf{Keywords}}
  {Autonomous driving; Autonomous vehicles; ATLASCAR; Data Clustering; Calibration; Data Labelling; Object Detection; Data Fusion; ADAS; LIDAR; Image Processing.}
  \vspace*{5mm}
  \TEXT{\textbf{Abstract}}
       {In the scope of the ATLASCAR2 project, this dissertation is based on the development (using \gls{ros}) of a driving assistance system that implements a detection, tracking and labelling interface of targets on the road. The detection and tracking are done from \gls{lidar} sensor data and a camera. Firstly, it is implemented an algorithm to be used in the camera based on the appearance of the target to be tracked. Next, it is developed a range based algorithm using the data acquired from the sensors to follow objects in a tridimensional space. Finally, because it is possible to detect and track objects using the image and the lasers, the combination of the algorithms is done by projecting what is captured from the sensors in the camera image, being possible to obtain a more accurate and robust tracking. To evaluate the algorithm some datasets were used with the labelled data from the several detected and followed objects. To perform this work the sensors and the camera need to be properly calibrated. To do this, the calibration between the several devices was done using an application that, by passing a ball in front of the sensors, it is possible to find the position values of each sensor relatively to a given reference device. Within the calibration, this dissertation also includes an improvement of the ball detection algorithm in the image obtained by the camera.}
\EndTitlePage
\titlepage\ \endtitlepage % empty page


%
% Tables of contents, of figures, ...
%

\pagenumbering{roman}
\tableofcontents

\cleardoublepage
\listoffigures

\cleardoublepage
\listoftables

\cleardoublepage
\lstlistoflistings


\cleardoublepage
\include{glossary}


% The chapters (usually written using the isolatin font encoding ...)

\titlepage\ \endtitlepage      % Página de verso em branco
\pagenumbering{arabic}


% ----------------------------------------------------------------
% Definicao de headers e footers
% ----------------------------------------------------------------
\pagestyle{fancy}
\renewcommand{\chaptermark}[1]{\markboth{\thechapter.#1}{}} % Capítulos em minúsculas
\fancyhf{}                                                  % Reset aos headers e footers
\fancyhead[LE,RO]{\thepage}                               % Header Left-Even (LE), Right-Odd (RO)
\fancyhead[LO]{\leftmark}                                 % Header Left-Odd (LO)
\fancyhead[RE]{\leftmark}                                 % Header Right-Even (RE)
\fancyfoot[LE]{Nuno Miguel Soares Silva}                               % Footer Left-Even (LE)
\fancyfoot[LO]{ }                               % Footer Left-Odd (LO)
\fancyfoot[RE]{\textit{ }}     % Footer Right-Even (RE)
\fancyfoot[RO]{\textit{Master's Thesis}}     % Footer Right-Odd (RO)
\renewcommand{\headrulewidth}{0.25pt}                     % Espessura da linha de header
\renewcommand{\footrulewidth}{0.25pt}                     % Espessura da linha de footer
\addtolength{\headheight}{0.5pt}                          % Espaçamento para a linha

\include{capintro/capintro}
\include{capstate/capstate}
\include{capexp/capexp}
\include{capcalib/capcalib}
\include{caplabel/caplabel}
\include{capresults/capresults}


\cleardoublepage
\include{capxconcl/capxconcl}  


%
% The bibliography
%
\cleardoublepage

\printbibliography[type=article,title={Bibliography}]
\printbibliography[type=misc,title={Electronic Bibliography}]
  % Use this is the final version
  %  unsrt produces numbered entries, sorted by order of citation
  %  plain produces numbered entries, sorted alphabetically
  %  other styles are possible (I recommend the harvard package)
  %\bibliographystyle{unsrt}
  %\bibliographystyle{plain}
  %\bibliography{library}% replace by the name of name of your .bib file
%\cleardoublepage

\begin{appendices}
\input{capappendices/capappendices}   
\end{appendices}

\end{document}
